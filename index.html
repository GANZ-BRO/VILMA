<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Matematika gyakorl√°s</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; background: #181c25; color: #f7f7f7; margin: 0; }
    main { max-width: 480px; margin: auto; padding: 1em; }
    h1 { font-size: 1.4em; }
    select, button, input, .numpad-btn {
      font-size: 1.1em; padding: 0.4em 0.7em; border-radius: 7px;
      border: 1px solid #444; background: #232737; color: #fff;
    }
    .category-row, .settings-row { display: flex; flex-wrap: wrap; gap: 1em; align-items: center; margin-bottom: 1em;}
    .settings-row label { font-size: 1em; }
    .problem-card {
      background: #232737; border-radius: 8px; margin-bottom: 1em; padding: 0.7em;
      box-shadow: 0 2px 8px 0 rgba(0,0,0,0.09);
    }
    .answer-view { min-height: 1.5em; margin-bottom: 0.5em; }
    .feedback { margin-top: 0.5em; }
    .feedback.correct { color: #79ec7d; }
    .feedback.wrong { color: #ff4d4d; }
    .numpad { display: flex; flex-wrap: wrap; gap: 0.5em; margin: 0.5em 0; }
    .numpad-btn { min-width: 2.2em; }
    .summary-list { padding-left: 1.2em; }
    .best { font-size: 0.95em; margin-bottom: 1em; color: #ffe066; }
    .error-msg {
      background: #ff4d4d;
      color: #fff;
      padding: 0.7em;
      border-radius: 8px;
      margin-bottom: 1em;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <main>
    <h1>Matematika gyakorl√°s</h1>
    <div class="category-row">
      <label for="category">Kateg√≥ria:</label>
      <select id="category">
        <option value="" selected disabled>V√°lassz kateg√≥ri√°t</option>
        <option value="√ñsszead√°s">√ñsszead√°s</option>
        <option value="Kivon√°s">Kivon√°s</option>
        <option value="Szorz√°s">Szorz√°s</option>
        <option value="Oszt√°s">Oszt√°s</option>
        <option value="Mind a n√©gy m≈±velet">Mind a n√©gy m≈±velet</option>
        <option value="Z√°r√≥jeles kifejez√©sek">Z√°r√≥jeles kifejez√©sek</option>
        <option value="T√∂rtek">T√∂rtek</option>
        <option value="Sz√°zal√©ksz√°m√≠t√°s">Sz√°zal√©ksz√°m√≠t√°s</option>
        <option value="Egyenletek √°trendez√©se">Egyenletek √°trendez√©se</option>
      </select>
      <label for="difficulty">Neh√©zs√©g:</label>
      <select id="difficulty">
        <option value="" selected disabled>V√°lassz neh√©zs√©get</option>
        <option value="easy">K√∂nny≈±</option>
        <option value="medium">K√∂zepes</option>
        <option value="hard">Neh√©z</option>
      </select>
    </div>
    <div class="settings-row">
      <button id="restart-btn" style="display:none;">√öjra</button>
      <span id="timer">‚è±Ô∏è 0 mp</span>
      <span id="score">üèÖ 0</span>
    </div>
    <div class="best" id="best-stats" style="display:none;"></div>
    <div id="problems"></div>
    <div id="summary"></div>
  </main>
  <script>
    // --- Feladatgener√°l√≥ f√ºggv√©nyek ---
    function gcd(a, b) { while (b) [a, b] = [b, a % b]; return Math.abs(a); }
    function simplifyFraction(num, den) {
      const sign = (num * den) < 0 ? "-" : "";
      num = Math.abs(num); den = Math.abs(den);
      const d = gcd(num, den);
      return sign + (num/d) + "/" + (den/d);
    }
    function randInt(a, b) { return Math.floor(Math.random() * (b - a + 1)) + a; }
    function generateAddition(difficulty) {
      let range = {easy:[1,30], medium:[-20,60], hard:[-100,150]}[difficulty];
      return Array.from({length:10}, () => {
        let a = randInt(...range), b = randInt(...range);
        return { question:`${a} + ${b} = ?`, answer:a+b, explanation:`Az √∂sszead√°s eredm√©nye: ${a} + ${b} = ${a+b}` };
      });
    }
    function generateSubtraction(difficulty) {
      let range = {easy:[5,40], medium:[-30,70], hard:[-120,170]}[difficulty];
      return Array.from({length:10}, () => {
        let a = randInt(...range), b = randInt(...range);
        return { question:`${a} - ${b} = ?`, answer:a-b, explanation:`A kivon√°s eredm√©nye: ${a} - ${b} = ${a-b}` };
      });
    }
    function generateMultiplication(difficulty) {
      let range = {easy:[2,10], medium:[-10,15], hard:[-20,25]}[difficulty];
      return Array.from({length:10}, () => {
        let a = randInt(...range), b = randInt(...range);
        return { question:`${a} √ó ${b} = ?`, answer:a*b, explanation:`A szorz√°s eredm√©nye: ${a} √ó ${b} = ${a*b}` };
      });
    }
    function generateDivision(difficulty) {
      let range = {easy:[2,10], medium:[-10,15], hard:[-20,25]}[difficulty];
      return Array.from({length:10}, () => {
        let b = 0; while (b === 0) b = randInt(...range);
        let ans = randInt(-10, 15);
        let a = b * ans;
        return { question:`${a} √∑ ${b} = ?`, answer:ans, explanation:`${a} √∑ ${b} = ${ans}` };
      });
    }
    function generateMixed(difficulty) {
      const ops = ["+", "-", "√ó", "√∑"];
      let arr = [];
      let ranges = {
        "+": {easy:[1,30], medium:[-20,60], hard:[-100,150]},
        "-": {easy:[5,40], medium:[-30,70], hard:[-120,170]},
        "√ó": {easy:[2,10], medium:[-10,15], hard:[-20,25]},
        "√∑": {easy:[2,10], medium:[-10,15], hard:[-20,25]}
      };
      for (let i = 0; i < 10; i++) {
        let op = ops[randInt(0,3)];
        let a, b, ans, q, expl;
        if (op === "+") {
          a = randInt(...ranges["+"]. [difficulty]); b = randInt(...ranges["+"]. [difficulty]);
          ans = a + b; q = `${a} + ${b} = ?`; expl = `Az √∂sszead√°s eredm√©nye: ${a} + ${b} = ${ans}`;
        } else if (op === "-") {
          a = randInt(...ranges["-"]. [difficulty]); b = randInt(...ranges["-"]. [difficulty]);
          ans = a - b; q = `${a} - ${b} = ?`; expl = `A kivon√°s eredm√©nye: ${a} - ${b} = ${ans}`;
        } else if (op === "√ó") {
          a = randInt(...ranges["√ó"]. [difficulty]); b = randInt(...ranges["√ó"]. [difficulty]);
          ans = a * b; q = `${a} √ó ${b} = ?`; expl = `A szorz√°s eredm√©nye: ${a} √ó ${b} = ${ans}`;
        } else {
          b = 0; while (b === 0) b = randInt(...ranges["√∑"]. [difficulty]);
          ans =*
ÓÄÄ

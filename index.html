<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>√ñsszead√°s Gyakorl√°sa</title>
  <style id="theme-style"></style>
</head>
<body>
  <h1>√ñsszead√°s Gyakorl√°sa</h1>
  <button onclick="toggleTheme()">üåó T√©ma v√°lt√°sa</button>
  <p id="timer">Eltelt id≈ë: 0 m√°sodperc</p>
  <p id="score">Pontsz√°m: 0</p>
  <div id="quiz"></div>

  <script>
    const quizContainer = document.getElementById("quiz");
    const scoreDisplay = document.getElementById("score");
    const timerDisplay = document.getElementById("timer");
    const styleTag = document.getElementById("theme-style");

    const numberOfQuestions = 10;
    let score = 0;
    let startTime = Date.now();
    let darkMode = true;

    function applyTheme() {
      if (darkMode) {
        styleTag.innerHTML = `
          body { background-color: #121212; color: #f1f1f1; font-family: sans-serif; margin: 20px; }
          input { background-color: #1e1e1e; color: #f1f1f1; border: 1px solid #444; padding: 5px; margin-top: 5px; }
          h1, p { color: #ffffff; }
          div { margin-bottom: 15px; }
          #score, #timer { font-weight: bold; }
        `;
      } else {
        styleTag.innerHTML = `
          body { background-color: #f1f1f1; color: #121212; font-family: sans-serif; margin: 20px; }
          input { background-color: #fff; color: #121212; border: 1px solid #ccc; padding: 5px; margin-top: 5px; }
          h1, p { color: #121212; }
          div { margin-bottom: 15px; }
          #score, #timer { font-weight: bold; }
        `;
      }
    }

    function toggleTheme() {
      darkMode = !darkMode;
      localStorage.setItem("darkMode", darkMode);
      applyTheme();
    }

    function loadTheme() {
      const saved = localStorage.getItem("darkMode");
      if (saved !== null) darkMode = saved === "true";
      applyTheme();
    }

    function updateTimer() {
      const now = Date.now();
      const elapsed = Math.floor((now - startTime) / 1000);
      timerDisplay.textContent = `Eltelt id≈ë: ${elapsed} m√°sodperc`;
    }

    setInterval(updateTimer, 1000);

    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function createQuestion(index) {
      const num1 = getRandomInt(-10, 10);
      const num2 = getRandomInt(-10, 10);
      const answer = num1 + num2;

      const div = document.createElement("div");
      div.id = "question" + index;
      div.style.display = index === 0 ? "block" : "none";

      const questionText = document.createElement("p");
      questionText.textContent = `${num1} + ${num2} = ?`;
      div.appendChild(questionText);

      const input = document.createElement("input");
      input.type = "number";

      input.addEventListener("change", () => {
        if (parseInt(input.value) === answer) {
          score++;
          scoreDisplay.textContent = `Pontsz√°m: ${score}`;
          div.style.display = "none";
          if (index + 1 < numberOfQuestions) {
            document.getElementById("question" + (index + 1)).style.display = "block";
          } else {
            updateTimer();
            alert(`√úgyes vagy! ${score} pontot szerezt√©l ${timerDisplay.textContent.toLowerCase()}.`);
          }
        } else {
          alert("Nem j√≥ v√°lasz, pr√≥b√°ld √∫jra!");
        }
      });

      div.appendChild(input);
      quizContainer.appendChild(div);
    }

    for (let i = 0; i < numberOfQuestions; i++) {
      createQuestion(i);
    }

    loadTheme(); // T√©ma alkalmaz√°sa bet√∂lt√©skor
  </script>
</body>
</html>
